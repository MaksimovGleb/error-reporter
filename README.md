# Error Reporter System

Система для сбора и просмотра отчетов об ошибках (Error Messages), построенная на Laravel 11.

## 1. Описание проекта
Приложение позволяет пользователям регистрировать сообщения об ошибках через Web-интерфейс или API. Каждое сообщение содержит заголовок, описание и уровень критичности. Данные доступны только авторизованному автору сообщения.

## 2. Скриншоты пользовательского интерфейса
*(Скриншоты доступны в папке `docs/screenshots`)*
- **Список сообщений**: Таблица с фильтрацией по автору и пагинацией.
- **Создание сообщения**: Форма с валидацией полей.

## 3. Инструкция по сборке и запуску

### Требования
- PHP 8.2+
- Composer
- Node.js & NPM
- SQLite (или другая БД)

### Установка
1. **Клонирование**:
   ```bash
   git clone <repository-url>
   cd error-reporter
   ```

2. **Зависимости**:
   ```bash
   composer install
   npm install
   ```

3. **Окружение**:
   ```bash
   cp .env.example .env
   php artisan key:generate
   ```

4. **База данных**:
   По умолчанию используется SQLite. Убедитесь, что файл `database/database.sqlite` существует (или выполните `touch database/database.sqlite`).
   ```bash
   php artisan migrate:fresh --seed
   ```

5. **Сборка фронтенда**:
   ```bash
   npm run build
   ```

6. **Запуск**:
   ```bash
   php artisan serve
   ```
   Приложение будет доступно по адресу `http://localhost:8000`.

## 4. Архитектурные решения

В проекте реализован современный подход к разработке на Laravel с разделением ответственности:

- **Data Transfer Objects (DTO)**: Используется `ErrorMessageData` для строгой типизации данных между контроллерами и бизнес-логикой. Это исключает передачу сырых массивов.
- **Actions**: Бизнес-логика вынесена в отдельные классы (`CreateErrorMessageAction`, `GetErrorMessagesAction`). Это позволяет повторно использовать код в Web и API контроллерах.
- **Service Layer**: `ErrorMessageService` выступает в роли фасада для доступа к экшенам, упрощая внедрение зависимостей в контроллеры.
- **API Resources**: `ErrorMessageResource` используется для трансформации моделей в JSON, обеспечивая стабильную структуру API и скрывая детали реализации БД.
- **Security**: 
    - Web-интерфейс защищен через Laravel Breeze (Session auth).
    - API защищено через Laravel Sanctum (Token auth).
    - Доступ к данным ограничен на уровне Query Builder (пользователь видит только свои записи).

## 5. API и Postman
Для тестирования API в корне проекта находится файл:
`error-reporter.postman_collection.json`

**Основные эндпоинты:**
- `POST /api/login` — Аутентификация.
- `GET /api/error-messages` — Список сообщений.
- `POST /api/error-messages` — Создание сообщения.

## 6. Тестирование
Для запуска автоматизированных тестов (Feature & Unit):
```bash
php artisan test
```
Тесты покрывают: регистрацию, логин (Web/API), CRUD операций и права доступа.
